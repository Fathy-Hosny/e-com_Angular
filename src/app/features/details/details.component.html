<section class="container details items-center mx-auto md:p-8">
  <div class="grid py-14 grid-cols-1 md:grid-cols-2 gap-8 items-start">
    <div class="flex flex-col md:flex-row gap-8 items-start">
      <div
        class="flex md:flex-col space-x-2 md:space-x-0 md:space-y-2 overflow-x-auto py-10 md:py-1 md:overflow-y-auto"
      >
        @for (image of productDetails.images; track image) {
        <img
          [src]="image"
          [alt]="productDetails.title"
          class="w-24 h-24 rounded-lg cursor-pointer border-2 border-blue-700 transition-colors duration-300 object-cover"
          [class.border-mainColor]="productDetails.imageCover === image"
          (click)="productDetails.imageCover = image"
        />
        }
      </div>

      <div
        class="flex-1 w-full py-4 max-h-[700px] overflow-hidden rounded-lg shadow-lg"
      >
        <img
          [src]="productDetails.imageCover"
          [alt]="productDetails.title"
          class="object-cover w-full h-full cursor-pointer"
          (click)="showModel(productDetails.imageCover)"
        />
      </div>
    </div>
    <div class="flex flex-col space-y-4">
      <h1 *ngIf="productDetails" class="text-3xl md:text-4xl font-bold text-gray-900">
        {{ productDetails.title }}
      </h1>
      <div *ngIf="productDetails?.category && productDetails?.brand"  class="flex items-center space-x-2 text-gray-600">
        <span class="text-xl font-semibold"
          >Category Name: {{ productDetails.category.name }}</span
        >
        <span>|</span>
        <span class="text-xl font-semibold"
          >Brand: {{ productDetails.brand.name }}</span
        >
      </div>

      <div class="flex items-center space-x-2 text-sm">
        <span class="text-yellow-400">
          <i class="fa-solid fa-star"></i>
        </span>

        <span class="font-semibold">{{ productDetails.ratingsAverage }}</span>
        <span class="text-gray-500"
          >({{ productDetails.ratingsQuantity }} ratings)</span
        >
      </div>

      <hr class="border-gray-300" />
      <p class="text-2xl text-amber-950">Description:</p>
      <p class="text-gray-700 text-2xl leading-relaxed whitespace-pre-line">
        {{ productDetails.description }}
      </p>

      <hr class="border-gray-300" />

      <div class="flex pt-20 items-center justify-between">
        <span class="text-3xl font-bold text-gray-900"
          >{{ productDetails.price }} EGP</span
        >
        <button
      (click)="addProductsItemToCart(productDetails._id)"
          class="bg-mainColor active:scale-98 cursor-pointer text-white px-6 py-3 rounded-lg font-semibold shadow-md transition-colors duration-700 hover:bg-amber-900"
        >
          <i class="fa-solid fa-cart-plus cursor-pointer text-xl"></i>
          Add to Cart
        </button>
      </div>
    </div>
  </div>
</section>
@if (!flag) {
<div
  class="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4
         transition-opacity duration-300"

  (click)="hideModel()"
>
  <div
    class="relative cursor-pointer max-w-3xl max-h-full transform transition-all duration-300"
    [ngClass]="{
      'scale-100 opacity-100': !animateClose,
      'scale-75 opacity-0': animateClose
    }"
    (click)="$event.stopPropagation()"
  >
    <img
      [src]="modelImg"
      alt="Product View"
      class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-lg"
    />
    <button
      class="absolute top-4 right-4 cursor-pointer text-3xl text-gray-600 hover:text-red-800 transition-colors duration-500"
      (click)="hideModel()"
    >
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>
}
